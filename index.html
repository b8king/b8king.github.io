<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <title>Document</title>

</head>
<body>

    <div id="main">
        <h2>Расписание УКБУиТК</h1><br>
        <img src="emoji.gif"><br>
        <button id="buy">Продолжить</button><br>
        <button id="skip">Пропустить</button>
    </div>

    <div id="page_list"><br>
        <h2>Как получить индекс листа</h1><br>
        <ol>
        <li>Нужно скачать xlsx документ - <a href="http://45.142.36.12/document/xlsx.xlsx">Скачать</a></li><br>
        <li>Затем найти свой лист с расписанием и посчитать его индекс</li><br> 
        </ol>
        <center>
        <table>
            <h4>Пример с расписанием 22-27.05.2023 г. (возможно изменится порядок)</h4></tr>
            <tr><td>Лист</td><td>Индекс</td></tr>
            <tr><td>Расписание ЗВОНКОВ</td><td>0</td></tr>
            <tr><td>ЗМ</td><td>1</td></tr>
            <tr><td>Л, БД</td><td>2</td></tr>
            <tr><td>ИСиП, ИС</td><td>3</td></tr>
            <tr><td>ГД, ТР</td><td>4</td></tr>
            <tr><td>ТПИ</td><td>5</td></tr>
            <tr><td>ТЭУ</td><td>6</td></tr>
            <tr><td>МК</td><td>7</td></tr>
            <tr><td>Д</td><td>8</td></tr>
        </table>  
    </center>      
        <button id="page_1">Далее</button>
    </div>

    <div id="page_lesson"><br>
        <h2>Как получить индекс пары</h1><br>
        <p>никак хихи хаха</p>
        <button id="page_2">Далее</button>
    </div>

    <div id="page_cabinet"><br>
        <h2>Как получить индекс кабинетов</h1><br>
        <p>никак хихи хаха</p>
        <button id="page_3">Далее</button>
    </div>
    
    <div id="page_commands"><br>
        <h2>Cписок комманд для чатов</h1><br>
        <p>/add - Добавить данные о группе</p>
        <p>/convert - Сохранить и получить результат</p>
        <p></p>
        <button id="page_4">Далее</button>
    </div>

    <div id="page_chat"><br>
        <h2>Чат</h1><br>
            <center>
        <div id="chat_id">
            <a href="https://t.me/polling_robot?startgroup=iris&admin=change_info+restrict_members+delete_messages+pin_messages+invite_users">Добавить в свой чат</a>
        </div><br>
            </center>
        <button id="page_5">Далее</button>

    </div>

    <form id="form"><br>
        <h2>Заполните форму</h2><br>
        <input type="text" placeholder="Индекс листа" id="list">
        <input type="text" placeholder="Индекс расписания" id="lesson">
        <input type="text" placeholder="Индекс кабинетов" id="cabinet">
        <button id="order">Готово</button><br>
        <button id="home">Вернуться</button>
    </form>


    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        let tg = window.Telegram.WebApp;
        let buy = document.getElementById("buy")
        let skip = document.getElementById("skip")
        let home = document.getElementById("home")
        let order = document.getElementById("order")
        let page_1 = document.getElementById("page_1")
        let page_2 = document.getElementById("page_2")
        let page_3 = document.getElementById("page_3")
        let page_4 = document.getElementById("page_4")
        let page_5 = document.getElementById("page_5")
        tg.expand();

        buy.addEventListener("click", () =>{
            document.getElementById("main").style.display = "none"
            document.getElementById("page_list").style.display = "block"
            
        })

        skip.addEventListener("click", () =>{
            document.getElementById("main").style.display = "none"
            document.getElementById("form").style.display = "block"
            
        })

        page_1.addEventListener("click", () =>{
            document.getElementById("main").style.display = "none"
            document.getElementById("page_list").style.display = "none"
            document.getElementById("page_lesson").style.display = "block"
        })
        page_2.addEventListener("click", () =>{
            document.getElementById("main").style.display = "none"
            document.getElementById("page_list").style.display = "none"
            document.getElementById("page_lesson").style.display = "none"
            document.getElementById("page_cabinet").style.display = "block"
        })

        page_3.addEventListener("click", () =>{
            document.getElementById("main").style.display = "none"
            document.getElementById("page_list").style.display = "none"
            document.getElementById("page_lesson").style.display = "none"
            document.getElementById("page_cabinet").style.display = "none"
            document.getElementById("page_commands").style.display = "block"
            
        })

        page_4.addEventListener("click", () =>{
            document.getElementById("main").style.display = "none"
            document.getElementById("page_list").style.display = "none"
            document.getElementById("page_lesson").style.display = "none"
            document.getElementById("page_cabinet").style.display = "none"
            document.getElementById("page_commands").style.display = "none"
            document.getElementById("page_chat").style.display = "block"
            
        })

        page_5.addEventListener("click", () =>{
            document.getElementById("main").style.display = "none"
            document.getElementById("page_list").style.display = "none"
            document.getElementById("page_lesson").style.display = "none"
            document.getElementById("page_cabinet").style.display = "none"
            document.getElementById("page_commands").style.display = "none"
            document.getElementById("page_chat").style.display = "none"
            document.getElementById("form").style.display = "block"
            
        })

        home.addEventListener("click", () =>{
            document.getElementById("main").style.display = "none"
            document.getElementById("page_list").style.display = "none"
            document.getElementById("page_lesson").style.display = "none"
            document.getElementById("page_cabinet").style.display = "none"
            document.getElementById("form").style.display = "none"
            document.getElementById("page_commands").style.display = "none"
            document.getElementById("page_chat").style.display = "none"
            document.getElementById("main").style.display = "block"
        })


        order.addEventListener("click", () =>{
            let list = document.getElementById("list").value;
            let lesson = document.getElementById("lesson").value;
            let cabinet = document.getElementById("cabinet").value;
            let data = {
                list: list,
                lesson: lesson,
                cabinet: cabinet
            }
            tg.sendData(JSON.stringify(data));

            tg.close();
        })
    </script>
</body>
</html>